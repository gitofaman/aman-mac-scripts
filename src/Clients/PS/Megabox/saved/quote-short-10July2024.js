var getTop=e=>e.offsetTop+(e.offsetParent&&getTop(e.offsetParent)),scrollToElementTop=(e,t)=>{var r=getTop(e)-t;window.scrollTo({top:r,behavior:"smooth"})},animateEl=(e,t,r)=>{console.log(r);var a={targets:e,duration:r,easing:"easeOutSine"};for(key in t)a[key]=t[key];anime(a)},sendFirstStepForm=e=>{let t=e.querySelectorAll("input"),r=[];for(let a=0;a<t.length;a++){let l=t[a],o=l.name,n=l.value;r.push(`${o}: ${n}`)}var s=r.join("\n");$("[first-step-data]").text(s),setTimeout(()=>{$("[first-step-form]").submit()},3e3)},mainForms=document.querySelectorAll("[form-main]");mainForms.forEach(e=>{var t,r,a,l,o,n,s,c,d,u,p,v=e.querySelector(".quote-progress-line"),m=e.querySelector("[booking-field]"),f=e.querySelector("[final-submit-btn]"),y=[[n,t,"address-text"],[s,r,"move-date"],[c,a,"move-time"],[d,l,"move-space"],[u,o,"move-store-time"]],h=(t,r)=>{e.querySelectorAll(`[${t}]`).forEach(e=>{e.innerText=r})},E=()=>{y.forEach(e=>{!e[1]&&e[0]&&(e[1]=e[0].value),h(e[2],e[1])})},S=(t,r)=>{var a,l=e.querySelector(`[${t}]`).getAttribute("name");e.querySelectorAll(`[name=${l}]`).forEach(e=>{e.parentElement.addEventListener("click",()=>{y[r][1]=e.value})}),E()},q=(t,r)=>{if(y[r][0]=e.querySelector(`[${t}]`),y[r][0]){var a=y[r][0];a.addEventListener("focusout",()=>{y[r][1]=a.value}),E()}};q("address-input",0),q("move-date-input",1),S("move-time-input",2),S("move-space-input",3),S("move-store-time-input",4);var g,A=e.querySelector(".popup"),x=()=>{E(),A.style.opacity=0,A.style.transform="translateY(40px)",A.style.display="flex",animateEl(A,{opacity:1,translateY:0},300)},_=()=>{E(),animateEl(A,{opacity:0,translateY:40},300),setTimeout(()=>{A.style.display="none"},300)},L=e.querySelector("[move-date-input]"),b=e.querySelector("[selected-date]"),T=e.querySelector("[time-select]");L.addEventListener("change",function(){var t=L.value,r=new Date(t),a=e.querySelector("[selected-date]");if(isNaN(r)){a.textContent="Invalid date";return}var l=r.toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric"});a.textContent=l,T.style.display="block"}),e.querySelectorAll("[close-popup]").forEach(e=>{e.addEventListener("click",_)}),e.querySelector("form").addEventListener("click",()=>{E()});var k=0,w=(p=Array.from(e.querySelectorAll(".form-step"))).length,F=e.querySelectorAll(".flow-step"),P={nextStep:"next-step-btn",prevStep:"prev-step-btn",showWhenActive:"show-class-when-active"},I={invalidInput:"invalid",invalidText:"invalid-text"},O=!1,R=e=>{for(k=e,1!==e||O||(O=!0,sendFirstStepForm(p[0])),p.forEach(e=>{e.style.display="none"}),p[e].style.display="",F.forEach(e=>{e.classList.remove("is--done")}),F[0].classList.add("is--done"),i=1;i<e+1;i++)F[i].classList.add("is--done");v.style.width=Math.round((e+1)/w*100)+"%",scrollToElementTop(p[e])};function Y(e){return null===e.offsetParent}var C=["Please add a value","Please select an option","Please add correct email"],B=(e,t)=>{if(!e.classList.contains(I.invalidInput)){e.classList.add(I.invalidInput);var r=document.createElement("div");r.classList.add(I.invalidText),r.innerText=C[t],e.parentElement.appendChild(r)}},Q=e=>{e.classList.remove(I.invalidInput);var t=e.parentElement.querySelector(`.${I.invalidText}`);t&&t.remove()},j=e=>{var t=Array.from(e.querySelectorAll("input, select")),r=[],a=!0;if(t.forEach(e=>{""!==e.value.trim()||e.disabled||Y(e)||r.push(e),"email"===e.getAttribute("type")&&(0>e.value.indexOf("@")||0>e.value.indexOf("."))&&r.push(e)}),r.length&&(a=!1,r.forEach(e=>{var t=0;"email"===e.getAttribute("type")&&(t=2),B(e,t)})),e.hasAttribute("radio-var-index")){var l,o=y[parseInt(e.getAttribute("radio-var-index"))][1];return o&&o.length>0?(a=!0,console.log("from here 1"),a):(a=!1,B(e.querySelector('input[type="radio"]').parentElement,1),console.log("from here 2"),a)}return console.log("from here 3"),a};p.forEach(e=>{var t=e.querySelectorAll(`[${P.nextStep}]`),r=e.querySelectorAll(`[${P.prevStep}]`),a=e.querySelectorAll("input, select"),l=p.indexOf(e),o=!0;t.forEach(t=>{t&&t.addEventListener("click",()=>{(o=j(e))&&R(l+1)})}),r.forEach(e=>{e&&e.addEventListener("click",()=>{R(l-1)})}),a.forEach(e=>{e.addEventListener("change",()=>{Q(e)})}),e.querySelectorAll('input[type="radio"]').forEach(t=>{t.addEventListener("click",()=>{Q(e)})})});var D,N,U=e=>{var t=document.querySelectorAll(".date-detail");e?t.forEach(e=>{e.style.display=""}):t.forEach(e=>{e.style.display="none"})};e.querySelectorAll("[open-popup-with]").forEach(e=>{var t=e.getAttribute("open-popup-with");e&&e.addEventListener("click",()=>{currentStepCondition=j(e.closest(".form-step")),console.log(currentStepCondition),m.value=t,"Yes"===t?(f.innerText="Request Booking",f.value="Request Booking",currentStepCondition&&x(),U(!0)):"No"===t&&(f.innerText="Request Quote",f.value="Request Quote",x(),U(!1))})}),R(0),e.querySelectorAll("[step-active]").forEach(e=>{var t=e.getAttribute("step-active");e.addEventListener("click",()=>{R(t)})})});